<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodel="clr-namespace:ProjetComplet.ViewModel"
             xmlns:model="clr-namespace:ProjetComplet.Model"
             x:DataType="viewmodel:MainViewModel"
             x:Class="ProjetComplet.MainPage"
             x:Name="MyPage">

    <ContentPage.MenuBarItems>
        <MenuBarItem Text="Details page"
                     BindingContext="{Binding Path=BindingContext,Source={x:Reference MyPage}}">
            <!--<MenuFlyoutSubItem Text=" Choix 1
                <MenuFlyoutItem Text=" Choix 1.1 "/>
            </MenuFlyoutSubItem>-->
            <MenuFlyoutItem Text=" Choix 2 "
                            Command="{Binding GoToDetailsPageCommand}"
                            CommandParameter="Details page"/>
        </MenuBarItem>
    </ContentPage.MenuBarItems>

    <Grid ColumnDefinitions="*" RowDefinitions="Auto,*" Padding="20" RowSpacing="20">
        <Button Grid.Row="0" 
                HeightRequest="70" 
                WidthRequest="120" 
                HorizontalOptions="Start" 
                Text="Load JSON"
                Command="{x:Binding Source={RelativeSource AncestorType={x:Type viewmodel:MainViewModel}},Path=GetPokemonsToJsonCommand}"/>
        <CollectionView ItemsSource="{Binding Pokemons}" Grid.Row="1">
            <CollectionView.ItemTemplate>
                <DataTemplate x:DataType="model:Pokemon">
                    <Grid Padding="10" ColumnDefinitions="500,*" BackgroundColor="White">
                        <Frame HeightRequest="125">
                            <Grid Padding="0" ColumnDefinitions="125,*" BackgroundColor="Grey">
                                <Image
                            Aspect="AspectFill"
                            HeightRequest="100"
                            Source="{Binding Picture}"
                            WidthRequest="100"/>
                                <VerticalStackLayout    VerticalOptions="Center"
                                                    Grid.Column="1"
                                                    Padding="10">
                                    <Label VerticalOptions="Center" Text="{Binding id}"/>
                                    <Label VerticalOptions="Center" Text="{Binding name_french}"/>
                                    <Label VerticalOptions="Center" Text="{Binding type_0}"/>

                                </VerticalStackLayout>
                            </Grid>
                        </Frame>
                    </Grid>
                </DataTemplate>

            </CollectionView.ItemTemplate>
        </CollectionView>
    </Grid>
    
</ContentPage>
